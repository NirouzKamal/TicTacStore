import{o as i,ad as m,H as u}from"./BXE2Xjof.js";import{y as c,A as a,a4 as n}from"./QjRxgrZG.js";const h=`
<dialog class="listing-image-gallery-full-screen-modal-dialog" aria-modal="true" aria-label="{{ ariaLabel }}" tabindex="-1">
   <div class="container max-width-100">
      <div class="full-xs relative">
         <div class="js-listing-image-gallery-full-screen-modal-dialog-content">
            {{ content }}
         </div>
   
         <button type="button" class="js-full-screen-dialog-closer full-screen-dialog-closer link text-decoration-none text-lg p-a-2 bg-surface-container-default border-radius-circle" aria-label="${c({"en":"Close"})}">
            ${c({"en":"Close"})} <i class="i-delete m-r-0" role="img" aria-hidden="true"></i>
         </button> 
      </div>
   </div>
</dialog>
`;class d{constructor(e){this.listingImageGallery=document.querySelector(`#${e}`),this.listingImageGalleryParent=this.listingImageGallery.parentNode,this.imageCarouselId=this.listingImageGallery.querySelector(".js-image-carousel").id,this.imageCarousel=this.listingImageGallery.querySelector(".js-image-carousel").carousel,this.imageCarouselImages=this.listingImageGallery.querySelectorAll(".js-listing-image-gallery-image"),this.slideIndicatorFrom=this.listingImageGallery.querySelector(".js-slide-indicator-from"),this.thumbnailCarouselId=this.listingImageGallery.querySelector(".js-thumbnail-carousel")?.id,this.thumbnailCarousel=this.listingImageGallery.querySelector(".js-thumbnail-carousel")?.carousel,this.thumbnailCarouselButtons=this.listingImageGallery.querySelectorAll(".js-thumbnail-carousel-button"),this.fullScreenOpeners=this.listingImageGallery.querySelectorAll(".js-full-screen-opener"),this.fullScreenDialog=null,this.thumbnailCarouselId?this.imageCarousel&&this.thumbnailCarousel?this._init():a.addEventListener("carousel:initialized",l=>{l.detail.id===this.imageCarouselId&&(this.imageCarousel=this.listingImageGallery.querySelector(".js-image-carousel").carousel,(this.thumbnailCarousel||n())&&this._init()),l.detail.id===this.thumbnailCarouselId&&(this.thumbnailCarousel=this.listingImageGallery.querySelector(".js-thumbnail-carousel").carousel,this.imageCarousel&&this._init())}):this.imageCarousel?this._init():a.addEventListener("carousel:initialized",l=>{l.detail.id===this.imageCarouselId&&(this.imageCarousel=this.listingImageGallery.querySelector(".js-image-carousel").carousel,this._init())})}_init(){this.thumbnailCarouselButtons.forEach((e,l)=>{i(e,"click",()=>{a.dispatchEvent("carousel:change-slide",{id:this.imageCarousel.id,index:l}),this.thumbnailCarouselButtons.forEach(s=>{s.classList.remove("active")}),this.thumbnailCarousel.showItem(l),this.thumbnailCarouselButtons[l].classList.add("active")})}),a.addEventListener("carousel:slide-changed",e=>{e.detail.id===this.imageCarousel.id&&(this.slideIndicatorFrom&&(this.slideIndicatorFrom.innerText=e.detail.index+1),this.thumbnailCarousel?.showItem(e.detail.index),this.thumbnailCarouselButtons.forEach(l=>{l.classList.remove("active")}),this.thumbnailCarouselButtons[e.detail.index]?.classList.add("active"))}),i(this.fullScreenOpeners,"click",()=>{this._openFullscreen()})}_openFullscreen(){if(this.fullScreenDialog)return;this.fullScreenDialog=document.createElement("dialog");let e=document.createElement("div");if(n()){let l=[];e.classList.add("d-flex","flex-column","row-gap-2"),this.imageCarouselImages.forEach(s=>{let t=document.createElement("div"),r=s.cloneNode();t.classList.add("image-container","border-radius-base"),r.classList.add("img-responsive","w-auto"),l.push(r),t.append(r),e.append(t)}),requestAnimationFrame(()=>{l[this.imageCarousel.slideIndex].scrollIntoView()})}else e.append(this.listingImageGallery),this.thumbnailCarousel.updateNumbersOfItemsPerSlide({sm:5,md:7,lg:8}),requestAnimationFrame(()=>{this.imageCarousel.initSlides()});this.fullScreenDialog=new m(h,{content:"",ariaLabel:"Image Gallery"}).getProcessedTemplate(),this.fullScreenDialog.querySelector(".js-listing-image-gallery-full-screen-modal-dialog-content").append(e),i(this.fullScreenDialog.querySelector(".js-full-screen-dialog-closer"),"click",()=>{this.fullScreenDialog.close()}),document.body.append(this.fullScreenDialog),u(!1),this.fullScreenDialog.showModal(),i(this.fullScreenDialog,"close",()=>{n()||(this.listingImageGalleryParent.append(this.listingImageGallery),this.thumbnailCarousel.updateNumbersOfItemsPerSlide({sm:4,md:5,lg:6})),requestAnimationFrame(()=>{this.imageCarousel.initSlides()}),u(!0),this.fullScreenDialog.remove(),this.fullScreenDialog=null})}}function g(o){new d(o)}window.initListingImageGallery=g;

(()=>{"use strict";function e(e){return"string"==typeof e?document.querySelectorAll(e):e instanceof NodeList?e:e instanceof Element||e instanceof Window||e instanceof Document?[e]:[]}function t(t,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.split(" ");e(t).forEach((function(e){o.forEach((function(t){e.addEventListener(t,n,a)}))}))}function i(t,i,n){this.elements=e(t),this.realEvent=i.split(".")[0],this.func=n}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}i.prototype.addEventListener=function(){var e=this;this.elements.forEach((function(t){t.addEventListener("".concat(e.realEvent),e.func)}))},i.prototype.removeEventListener=function(){var e=this;this.elements.forEach((function(t){t.removeEventListener("".concat(e.realEvent),e.func)}))};var r=function(){return e=function e(i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=this;this.detailImages=document.querySelector("#"+i),this.watchId=this.detailImages.dataset.detailImagesWatchId,this.images=this.detailImages.querySelectorAll(".js-detail-images-image"),this.zoomImageContainer=this.detailImages.querySelector(".js-zoom-image-container"),this.watchImageCarousel=this.detailImages.querySelector(".js-carousel"),this.images.forEach((function(e,i){t(e,"click",(function(){n.watchImageCarousel.flickity.selectedIndex=i,n.watchImageCarousel.flickityNav.selectedIndex=i,n.watchImageCarousel.flickity.viewFullscreen()}))})),t(this.zoomImageContainer,"mouseenter",(function(){return a._createMagnifier(n.zoomImageContainer)})),t(this.zoomImageContainer,"mouseleave",a._destroyMagnifier.bind(a)),t(this.zoomImageContainer,"click",a._destroyMagnifier.bind(a))},(i=[{key:"_createMagnifier",value:function(e){var i=.6*e.offsetHeight;this.magnifier=this.magnifier||document.createElement("div"),this.magnifier.classList.add("magnifier"),this.magnifier.style.backgroundImage='url("'.concat(e.dataset.zoomImage,'")'),this.magnifier.style.backgroundSize="".concat(e.dataset.zoomImageWidth,"px ").concat(e.dataset.zoomImageHeight,"px"),this.magnifier.style.width="".concat(i,"px"),this.magnifier.style.height="".concat(i,"px"),e.append(this.magnifier),t(e,"mousemove",function(t){t.preventDefault();var n=e.getBoundingClientRect(),a=t.pageX-n.left-window.pageXOffset,o=t.pageY-n.top-window.pageYOffset,r=a/e.offsetWidth*100,s=o/e.offsetHeight*100;this.magnifier.style.left="".concat(Math.min(e.offsetWidth-i,Math.max(0,a-i/2)),"px"),this.magnifier.style.top="".concat(Math.min(e.offsetHeight-i,Math.max(0,o-i/2)),"px"),this.magnifier.style.backgroundPosition="".concat(Math.min(100,Math.max(0,r)),"% ").concat(Math.min(100,Math.max(0,s)),"%")}.bind(this))}},{key:"_destroyMagnifier",value:function(){this.magnifier&&this.magnifier.parentElement&&this.magnifier.parentElement.removeChild(this.magnifier),delete this.magnifier}}])&&a(e.prototype,i),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n}();window.initDetailImages=function(e){new r(e)}})();
import{o as t}from"./BXE2Xjof.js";import"./QjRxgrZG.js";class h{constructor(e){this.zoomableImage=document.querySelector(`#${e}`),this.zoomImageSrc=this.zoomableImage.dataset.zoomImage,this.zoomImageWidth=this.zoomableImage.dataset.zoomImageWidth,this.zoomImageHeight=this.zoomableImage.dataset.zoomImageHeight,this.magnifier=null,this.magnifierSideLength=null,t(this.zoomableImage,"mouseenter",()=>{this._createMagnifier()}),t(this.zoomableImage,"mousemove",i=>{this._moveMagnifier(i)}),t(this.zoomableImage,"mouseleave click",()=>{this._destroyMagnifier()})}_createMagnifier(){if(this.magnifierSideLength=Math.min(this.zoomableImage.offsetWidth,this.zoomableImage.offsetHeight)*.6,this.magnifier=this.magnifier||document.createElement("div"),this.magnifier.classList.add("magnifier"),this.zoomableImage.classList.contains("zoom-image-loaded"))this.magnifier.style.backgroundImage=`url("${this.zoomImageSrc}")`;else{this.magnifier.style.backgroundImage=`url("${this.zoomableImage.querySelector(".js-original-image").src}")`;const e=new Image;e.onload=()=>{this.magnifier&&(this.magnifier.style.backgroundImage=`url("${e.src}")`),this.zoomableImage.classList.add("zoom-image-loaded")},e.src=this.zoomImageSrc}this.magnifier.style.backgroundSize=`${this.zoomImageWidth}px ${this.zoomImageHeight}px`,this.magnifier.style.width=`${this.magnifierSideLength}px`,this.magnifier.style.height=`${this.magnifierSideLength}px`,this.zoomableImage.append(this.magnifier)}_moveMagnifier(e){if(e.preventDefault(),this.magnifier===null)return;const i=this.zoomableImage.getBoundingClientRect(),o=e.pageX-i.left-window.pageXOffset,m=e.pageY-i.top-window.pageYOffset,s=o/this.zoomableImage.offsetWidth*100,g=m/this.zoomableImage.offsetHeight*100;this.magnifier.style.left=`${Math.floor(Math.min(this.zoomableImage.offsetWidth-this.magnifierSideLength,Math.max(0,o-this.magnifierSideLength/2)))}px`,this.magnifier.style.top=`${Math.floor(Math.min(this.zoomableImage.offsetHeight-this.magnifierSideLength,Math.max(0,m-this.magnifierSideLength/2)))}px`,this.magnifier.style.backgroundPosition=`${Math.min(100,Math.max(0,s))}% ${Math.min(100,Math.max(0,g))}%`}_destroyMagnifier(){this.magnifier&&this.zoomableImage.removeChild(this.magnifier),delete this.magnifier,delete this.magnifierSideLength}}function n(a){new h(a)}window.initZoomableImage=n;

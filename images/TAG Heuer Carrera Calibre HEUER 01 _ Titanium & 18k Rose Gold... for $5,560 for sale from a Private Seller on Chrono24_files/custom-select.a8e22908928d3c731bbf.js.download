(()=>{"use strict";function t(t){return"string"==typeof t?document.querySelectorAll(t):t instanceof NodeList?t:t instanceof Element||t instanceof Window||t instanceof Document?[t]:[]}function e(e,i,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.split(" ");t(e).forEach((function(t){o.forEach((function(e){t.addEventListener(e,n,c)}))}))}function i(e,i,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.split(" ");t(e).forEach((function(t){o.forEach((function(e){t.removeEventListener(e,n,c)}))}))}function n(e,i){var n=t(e),c=document.createEvent("Event");c.initEvent("".concat(i),!0,!0),n.forEach((function(t){t.dispatchEvent(c)}))}function c(e,i,n){this.elements=t(e),this.realEvent=i.split(".")[0],this.func=n}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function l(t,e,i){return(e=r(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}c.prototype.addEventListener=function(){var t=this;this.elements.forEach((function(e){e.addEventListener("".concat(t.realEvent),t.func)}))},c.prototype.removeEventListener=function(){var t=this;this.elements.forEach((function(e){e.removeEventListener("".concat(t.realEvent),t.func)}))};var u=function(){return c=function e(i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_handleClick",(function(e){(function(e,i){return!!t(e).find((function(t){return t.contains(i.target)}))})(n.customSelect,e)||n._close()})),l(this,"_handleKeydown",(function(t){if("Escape"===t.key)return n._close(),void n.customSelectButton.focus();t.key.match(/[a-z]/i)&&n._search(t.key)})),this.customSelect=document.querySelector("#"+i),this.customSelectData=this.customSelect.dataset,this.customSelectNativeSelect=this.customSelect.querySelector(".js-native-select"),this.customSelectNativeSelectOptions=this.customSelectNativeSelect.querySelectorAll("option"),this.customSelectButton=this.customSelect.querySelector(".js-custom-select-button"),this.customSelectList=this.customSelect.querySelector(".js-custom-select-list"),this.placeholder=this.customSelectData.placeholder,this.searchString="",this.searchTimer,this.isMultiple="true"===this.customSelectData.multiple,this.isOpen=!1,this._init()},(o=[{key:"_init",value:function(){this.customSelectList&&this._initCustomSelectList(),this._initEventListeners()}},{key:"_initEventListeners",value:function(){var t=this;e(this.customSelectNativeSelect,"change",(function(){t.isMultiple?t.customSelectNativeSelect.selectedOptions.length>0?t.customSelectButton.innerHTML=Array.from(t.customSelectNativeSelect.selectedOptions).map((function(t){return t.innerText})).join(", "):t.customSelectButton.innerHTML=t.placeholder:t.customSelectButton.innerHTML=t.customSelectNativeSelect.options[t.customSelectNativeSelect.selectedIndex].dataset.content||t.customSelectNativeSelect.options[t.customSelectNativeSelect.selectedIndex].innerText})),this.customSelectList&&(e(this.customSelectButton,"click",(function(){t.isOpen?t._close():t._open()})),e(this.customSelectButton,"keydown",(function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||t.isOpen||(e.preventDefault(),t._open())})),e(this.customSelectList,"click",(function(e){var i=e.target.closest(".js-custom-select-list-item-button");if(i){if(t.isMultiple){var c=Array.from(t.customSelectNativeSelect.options).find((function(t){return t.value==i.dataset.value}));c.selected?(c.selected=!1,i.classList.remove("active")):(c.selected=!0,i.classList.add("active"))}else Array.from(t.customSelectList.querySelectorAll(".js-custom-select-list-item-button")).forEach((function(t){return t.classList.remove("active")})),i.classList.add("active"),t.customSelectNativeSelect.value=i.dataset.value,t._close(),t.customSelectButton.focus();n(t.customSelectNativeSelect,"change")}})),e(this.customSelectList,"keydown",(function(e){if("Tab"===e.key){e.preventDefault();var i=!1;return t.isMultiple||t.customSelectNativeSelect.value==t.customSelectNativeSelect.value||(t.customSelectNativeSelect.value=e.target.dataset.value,i=!0),t._close(),t.customSelectButton.focus(),void(i&&n(t.customSelectNativeSelect,"change"))}if("ArrowDown"!==e.key){if("ArrowUp"===e.key){e.preventDefault();var c=e.target.parentNode.previousSibling?"HR"==e.target.parentNode.previousSibling.tagName?e.target.parentNode.previousSibling.previousSibling:e.target.parentNode.previousSibling:null;c&&c.querySelector(".js-custom-select-list-item-button").focus()}}else{e.preventDefault();var o=e.target.parentNode.nextSibling?"HR"==e.target.parentNode.nextSibling.tagName?e.target.parentNode.nextSibling.nextSibling:e.target.parentNode.nextSibling:null;o&&o.querySelector(".js-custom-select-list-item-button").focus()}})))}},{key:"_initCustomSelectList",value:function(){var t=this;this.customSelectNativeSelectOptions.forEach((function(e){if(!e.dataset.hidden)if(e.dataset.divider){var i=document.createElement("hr");t.customSelectList.appendChild(i)}else{var n=document.createElement("li"),c=document.createElement("button");c.dataset.value=e.value,c.type="button",c.innerHTML=e.dataset.content||e.innerText,c.classList.add("js-custom-select-list-item-button"),e.selected&&c.classList.add("active"),n.classList.add("custom-select-list-item"),n.appendChild(c),t.customSelectList.appendChild(n)}}))}},{key:"_open",value:function(){this.isOpen=!0,e(window,"click",this._handleClick),e(window,"keydown",this._handleKeydown),this.customSelectList.classList.remove("d-none");var t=this.customSelectList.querySelector(".js-custom-select-list-item-button.active");t?t.focus():this.customSelectList.querySelector(".js-custom-select-list-item-button").focus()}},{key:"_close",value:function(){this.isOpen=!1,i(window,"click",this._handleClick),i(window,"keydown",this._handleKeydown),this.customSelectList.classList.add("d-none")}},{key:"_search",value:function(t){var e=this;clearTimeout(this.searchTimer),this.searchString+=t.toLowerCase();var i=Array.from(this.customSelectNativeSelectOptions).find((function(t){return t.text.toLowerCase().startsWith(e.searchString)}));i&&this.customSelectList.querySelector('.js-custom-select-list-item-button[data-value="'.concat(i.value,'"]')).focus(),this.searchTimer=setTimeout((function(){e.searchString=""}),500)}}])&&s(c.prototype,o),r&&s(c,r),Object.defineProperty(c,"prototype",{writable:!1}),c;var c,o,r}();window.initCustomSelect=function(t){new u(t)}})();
import{A as n,y as c,ar as a}from"./QjRxgrZG.js";import{o as l,t as h,ah as u}from"./BXE2Xjof.js";class g{constructor(e){this.id=e,this.carousel=document.querySelector(`#${e}`),this.carousel.carousel=this,this.numbersOfItemsPerSlide={xs:this.carousel.dataset.numberOfItemsPerSlideXs,sm:this.carousel.dataset.numberOfItemsPerSlideSm,md:this.carousel.dataset.numberOfItemsPerSlideMd,lg:this.carousel.dataset.numberOfItemsPerSlideLg},this.trackingName=this.carousel.dataset.trackingName,this.wrapAround=this.carousel.dataset.wrapAround,this.cutted=this.carousel.dataset.cutted,this.scrollContainer=this.carousel.querySelector(".js-scroll-container"),this.carouselItems=Array.from(this.scrollContainer.querySelectorAll(".js-scroll-container > *")),this.slideIndex=0,this.previousButton=this.carousel.querySelector(".js-previous-button"),this.nextButton=this.carousel.querySelector(".js-next-button"),this.dotNavigation=this.carousel.querySelector(".js-dot-navigation"),this.dotNavigationButtons=[],this._init()}_init(){l(this.previousButton,"click",t=>{t.preventDefault(),t.stopPropagation(),this._showSlide(this.slideIndex-1)}),l(this.nextButton,"click",t=>{t.preventDefault(),t.stopPropagation(),this._showSlide(this.slideIndex+1)}),this.trackingName&&(l(this.scrollContainer,"scroll",()=>{h("interact_carousel",this.trackingName,"navigate",{},!0)},{once:!0}),this.carouselItems.forEach(t=>{l(t,"click",()=>{h("interact_carousel",this.trackingName,"click",{},!0)})})),l(this.scrollContainer,"scrollend",()=>{let t=-1;if(Math.ceil(this.scrollContainer.scrollLeft+this.scrollContainer.offsetWidth)>=this.scrollContainer.scrollWidth)t=this.slides.length-1;else{const s=this.scrollContainer.getBoundingClientRect().left,i=this.slides.map(([o])=>Math.abs(o.getBoundingClientRect().left-s));for(let o=0;o<i.length;o++)i[o]<(i[t]??1/0)&&(t=o)}t!==-1&&t!==this.slideIndex&&this._showSlide(t,!1)}),n.addEventListener("carousel:change-slide",t=>{t.detail.id===this.id&&this._showSlide(t.detail.index)}),n.addEventListener("breakpoint:changed",()=>{this.initSlides()}),this.initSlides();const e=this.id;n.dispatchEvent("carousel:initialized",{id:e})}_createDotNavigation(){this.dotNavigation&&(this.dotNavigation.innerHTML="",this.dotNavigationButtons=[],!(this.slides.length<=1)&&this.slides.forEach((e,t)=>{const s=document.createElement("li"),i=document.createElement("button"),o=document.createElement("span");i.classList.add("dot"),o.classList.add("visually-hidden"),o.innerText=c({"en":"Go to slide {0}"},t+1),l(i,"click",d=>{d.preventDefault(),d.stopPropagation(),this._showSlide(t)}),i.append(o),s.append(i),this.dotNavigation.append(s),this.dotNavigationButtons.push(i)}))}updateNumbersOfItemsPerSlide(e={}){["xs","sm","md","lg"].forEach(t=>{e[t]&&(this.numbersOfItemsPerSlide[t]=e[t],this.carousel.style.setProperty(`--number-of-items-per-slide-${t}`,e[t]))}),this.initSlides()}_updateDotNavigationButtons(){!this.dotNavigation||this.dotNavigationButtons==null||this.dotNavigationButtons.length===0||(this.dotNavigationButtons.forEach(e=>{e.removeAttribute("aria-current"),e.classList.remove("active")}),this.dotNavigationButtons[this.slideIndex].setAttribute("aria-current",!0),this.dotNavigationButtons[this.slideIndex].classList.add("active"))}_updateArrowNavigationButtons(){this.previousButton&&this.nextButton&&!this.wrapAround&&(this.previousButton.disabled=this.slideIndex===0,this.nextButton.disabled=this.slideIndex===this.slides.length-1)}_createSlides(){this.slides=u(this.carouselItems,this.numbersOfItemsPerSlide[a()])}initSlides(){const e=this.slides,t=this.slideIndex;let s=0;this._createSlides(),this._createDotNavigation(),e&&t>0&&(s=Math.round(t/(e.length-1)*(this.slides.length-1))),this._showSlide(s,!1)}_updateCarouselItemsInert(){this.carouselItems.forEach((e,t)=>{const s=Math.floor(t/this.numbersOfItemsPerSlide[a()]);(this.slideIndex===this.slides.length-1?t>=this.carouselItems.length-this.numbersOfItemsPerSlide[a()]:this.slideIndex===s)?e.removeAttribute("inert"):e.setAttribute("inert","")})}_showSlide(e,t=!0){if(this.cutted)return;this.slideIndex=(e+this.slides.length)%this.slides.length,this._updateArrowNavigationButtons(),this._updateDotNavigationButtons(),this.scrollContainer.scrollTo({left:this.slides[this.slideIndex][0].getBoundingClientRect().left-this.scrollContainer.getBoundingClientRect().left+this.scrollContainer.scrollLeft,behavior:t?"smooth":"auto"}),this._updateCarouselItemsInert();const s=this.id;n.dispatchEvent("carousel:slide-changed",{id:s,index:this.slideIndex})}showItem(e){if(this.cutted)this.scrollContainer.scrollTo({left:this.carouselItems[e].getBoundingClientRect().left-this.scrollContainer.getBoundingClientRect().left+this.scrollContainer.scrollLeft-this.scrollContainer.offsetWidth/2,behavior:"smooth"});else{const t=Math.floor(e/this.numbersOfItemsPerSlide[a()]);t!==this.slideIndex&&this.carouselItems[e].inert&&this._showSlide(t)}}}function f(r){new IntersectionObserver((t,s)=>{t.forEach(i=>{i.isIntersecting&&(new g(r),s.unobserve(i.target))})},{rootMargin:"100px"}).observe(document.querySelector(`#${r}`))}window.initNewCarousel=f;
